# ADR-0001: 采用semi-auto ADR工作流

## 状态
已接受

## 背景
随着oppie.xyz项目的发展，我们面临了以下挑战：

1. **技术决策缺乏可追溯性**：关键架构决策散布在各种Plan-Execute循环文件中，难以查找和追溯。
2. **新团队成员的知识获取障碍**：新加入的开发者需要阅读大量原始对话才能理解为什么选择了某个特定方案。
3. **重要决策的文档不足**：许多重要决策只在`.scratchpad_logs/`的原始对话中保留，没有正式记录。

在评估了几种记录架构决策的方法后，我们认为需要一种既能保持轻量级又能与现有Plan-Execute循环无缝集成的解决方案。

## 决策
我们决定采用semi-auto ADR（架构决策记录）工作流，具有以下特点：

1. 在`.cursor/adr/`目录下维护结构化的ADR文件
2. 创建`tools/adr_init.sh`脚本简化ADR创建过程
3. 扩展Plan-Execute模板，添加`[🔖 ADR LINK]`字段关联ADR与特定循环
4. 采用"Context → Decision → Consequences"的简洁格式
5. 使用基于日期的ADR文件命名（YYYYMMDD_短标题.md）

我们特意选择"semi-auto"方法而非完全自动化，以确保决策记录的质量和相关性，同时减少维护开销。

## 后果

### 正面影响
1. **提高决策可追溯性**：关键决策清晰记录并易于查找
2. **加速新成员入职**：新团队成员可以快速了解历史决策及其原因
3. **减少重复讨论**：避免重复讨论已解决的问题
4. **改进长期维护性**：为项目未来的维护者提供清晰的架构演进路径
5. **支持分布式团队协作**：为异步工作的团队成员提供决策记录

### 潜在风险
1. **维护开销**：需要额外时间创建和维护ADR文件
2. **可能的过度文档化**：不是所有决策都需要ADR，需要明确判断标准
3. **文档可能过时**：如果不随代码一起更新，ADR可能会与实际实现不同步

### 缓解措施
1. 将ADR创建集成到Plan-Execute循环中，最小化额外工作
2. 提供清晰的标准，说明哪些决策需要ADR（仅重大/难以逆转的决策）
3. 通过CI验证确保ADR引用的准确性和完整性

## 相关循环
- Cycle 2 (添加semi-auto ADR功能)
